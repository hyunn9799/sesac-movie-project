<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MovieHub - 로그인/회원가입</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      body { margin: 0; padding: 0; background-color: #141414; font-family: "Arial", sans-serif; }
      a { cursor: pointer; }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      // ========== 스타일 토큰 ==========
      const colors = {
        primary: "#E50914",
        secondary: "#B20710",
        dark: "#141414",
        darkGray: "#2F2F2F",
        mediumGray: "#808080",
        lightGray: "#E5E5E5",
        white: "#FFFFFF",
        yellow: "#F5C518",
        success: "#4CAF50",
        warning: "#FF9800",
        error: "#F44336",
        info: "#2196F3",
        textPrimary: "#FFFFFF",
        textSecondary: "#808080",
        textLight: "#999999",
      };
      const spacing = { xs: "4px", sm: "8px", md: "16px", lg: "24px", xl: "32px", xxl: "48px" };
      const fontSize = { small: "12px", medium: "14px", large: "16px", xlarge: "20px", xxlarge: "24px", title: "32px", hero: "48px" };
      const fontWeight = { light: 300, normal: 400, medium: 500, bold: 700 };
      const shadow = { small: "0 2px 4px rgba(0,0,0,0.1)", medium: "0 4px 8px rgba(0,0,0,0.15)", large: "0 8px 16px rgba(0,0,0,0.2)", header: "0 2px 8px rgba(0,0,0,0.3)" };
      const borderRadius = { small: "4px", medium: "8px", large: "12px", round: "20px", circle: "50%" };
      const transition = { fast: "all 0.2s ease", normal: "all 0.3s ease", slow: "all 0.5s ease" };
      const commonStyles = {
        button: { padding: `${spacing.sm} ${spacing.lg}`, fontSize: fontSize.medium, fontWeight: fontWeight.medium, border: "none", borderRadius: borderRadius.small, cursor: "pointer", transition: transition.normal },
        buttonPrimary: { backgroundColor: colors.primary, color: colors.white },
        input: { padding: spacing.md, fontSize: fontSize.medium, border: `1px solid ${colors.lightGray}`, borderRadius: borderRadius.small, width: "100%", boxSizing: "border-box" },
        heading: { fontSize: fontSize.title, fontWeight: fontWeight.bold, color: colors.textPrimary, margin: `${spacing.lg} 0` },
      };

      const { useState } = React;

      // ========== 모달 컴포넌트 ==========
      function Modal({ modal, closeModal }) {
        if (!modal.isVisible) return null;
        const overlayStyle = { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, backgroundColor: "rgba(0,0,0,0.7)", display: "flex", justifyContent: "center", alignItems: "center", zIndex: 1000 };
        const modalBoxStyle = { backgroundColor: colors.darkGray, padding: spacing.xl, borderRadius: borderRadius.medium, width: "350px", textAlign: "center", color: colors.white };
        const headerStyle = { fontSize: fontSize.xxlarge, marginBottom: spacing.md, fontWeight: fontWeight.bold };
        
        let headerText = "", headerColor = "";
        if (modal.type === "success") { headerText = "✔"; headerColor = colors.success; }
        else if (modal.type === "error") { headerText = "❗"; headerColor = colors.error; }
        else if (modal.type === "warning") { headerText = "⚠"; headerColor = colors.warning; }
        
        const buttonStyle = { ...commonStyles.button, backgroundColor: headerColor, padding: `${spacing.sm} ${spacing.lg}`, marginTop: spacing.md };
        
        return (
          <div style={overlayStyle}>
            <div style={modalBoxStyle}>
              <div style={{ ...headerStyle, color: headerColor }}>{headerText}</div>
              <p style={{ whiteSpace: "pre-wrap", margin: 0, fontSize: fontSize.large, lineHeight: 1.6 }}>{modal.message}</p>
              <button onClick={closeModal} style={buttonStyle}>확인</button>
            </div>
          </div>
        );
      }

      // ========== 확인 모달 (예/아니오) ==========
      function ConfirmModal({ modal, onConfirm, onCancel }) {
        if (!modal.isVisible) return null;
        const overlayStyle = { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, backgroundColor: "rgba(0,0,0,0.7)", display: "flex", justifyContent: "center", alignItems: "center", zIndex: 1000 };
        const modalBoxStyle = { backgroundColor: colors.white, padding: spacing.xl, borderRadius: borderRadius.medium, width: "300px", textAlign: "center" };
        
        return (
          <div style={overlayStyle}>
            <div style={modalBoxStyle}>
              <p style={{ margin: 0, fontSize: fontSize.large, color: colors.dark, marginBottom: spacing.lg }}>{modal.message}</p>
              <div style={{ display: "flex", gap: spacing.md, justifyContent: "center" }}>
                <button onClick={onConfirm} style={{ ...commonStyles.button, backgroundColor: colors.error, color: colors.white, padding: `${spacing.sm} ${spacing.lg}` }}>예</button>
                <button onClick={onCancel} style={{ ...commonStyles.button, backgroundColor: colors.mediumGray, color: colors.white, padding: `${spacing.sm} ${spacing.lg}` }}>아니오</button>
              </div>
            </div>
          </div>
        );
      }

      // ========== 로그인 실패 알림 박스 ==========
      function ErrorAlert({ message, onClose }) {
        if (!message) return null;
        return (
          <div style={{ backgroundColor: colors.error, color: colors.white, padding: spacing.lg, borderRadius: borderRadius.small, marginBottom: spacing.lg, textAlign: "center" }}>
            <p style={{ margin: 0, fontSize: fontSize.large, fontWeight: fontWeight.bold }}>❗ 새싹님이 로그인에 실패하였습니다!</p>
            <p style={{ margin: `${spacing.sm} 0 0 0`, fontSize: fontSize.medium }}>{message}</p>
          </div>
        );
      }

      // ========== 로그인 폼 ==========
      function LoginForm({ onLoginSuccess, onNavigateRegister }) {
        const [id, setId] = useState("");
        const [password, setPassword] = useState("");
        const [formError, setFormError] = useState("");
        
        const handleSubmit = (e) => {
          e.preventDefault();
          setFormError("");
          if (!id || !password) {
            setFormError("아이디와 비밀번호를 모두 입력해주세요.");
            return;
          }
          if (id === "test" && password === "1234") {
            onLoginSuccess();
          } else {
            setFormError("아이디 또는 비밀번호가 일치하지 않습니다.");
          }
        };
        
        const inputStyle = { ...commonStyles.input, backgroundColor: colors.darkGray, border: `1px solid ${colors.mediumGray}`, color: colors.white, padding: spacing.md, marginBottom: spacing.lg, marginTop: spacing.xs };
        const buttonPrimary = { ...commonStyles.button, ...commonStyles.buttonPrimary, width: "100%", fontSize: fontSize.large, padding: spacing.md };
        
        return (
          <div>
            <h2 style={{ ...commonStyles.heading, textAlign: "center", color: colors.white, marginBottom: spacing.xl }}>로그인</h2>
            <ErrorAlert message={formError} />
            <form onSubmit={handleSubmit}>
              <div>
                <label style={{ display: "block", fontSize: fontSize.medium, color: colors.textLight }}>아이디</label>
                <input type="text" value={id} onChange={(e) => setId(e.target.value)} placeholder="아이디를 입력하세요." style={inputStyle} />
              </div>
              <div>
                <label style={{ display: "block", fontSize: fontSize.medium, color: colors.textLight }}>비밀번호</label>
                <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} placeholder="비밀번호를 입력하세요." style={inputStyle} />
              </div>
              <button type="submit" style={buttonPrimary}>로그인</button>
            </form>
            <div style={{ marginTop: spacing.xl, textAlign: "center" }}>
              <a onClick={onNavigateRegister} style={{ color: colors.mediumGray, textDecoration: "none", display: "block", marginBottom: spacing.sm }}>회원가입</a>
              <a href="#" style={{ color: colors.mediumGray, textDecoration: "none", display: "block" }}>아이디 / 비밀번호 찾기</a>
            </div>
          </div>
        );
      }

      // ========== 회원가입 폼 ==========
      function RegisterForm({ onRegisterSuccess, onNavigateLogin }) {
        const [step, setStep] = useState(1);
        const [terms, setTerms] = useState({ term1: false, term2: false, term3: false });
        const [formData, setFormData] = useState({ id: "", password: "", name: "", email: "" });
        const [formError, setFormError] = useState("");
        
        const handleNextStep = () => {
          if (!terms.term1 || !terms.term2) {
            setFormError("필수 약관에 동의해야 다음 단계로 진행할 수 있습니다.");
            return;
          }
          setFormError("");
          setStep(2);
        };
        
        const handleInputChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });
        
        const handleRegisterSubmit = (e) => {
          e.preventDefault();
          if (!formData.id || !formData.password || !formData.name || !formData.email) {
            setFormError("모든 필수 정보를 입력해주세요.");
            return;
          }
          onRegisterSuccess(formData.id);
        };
        
        const inputStyle = { ...commonStyles.input, backgroundColor: colors.darkGray, border: `1px solid ${colors.mediumGray}`, color: colors.white, padding: spacing.md, marginBottom: spacing.lg, marginTop: spacing.xs };
        const buttonPrimary = { ...commonStyles.button, ...commonStyles.buttonPrimary, width: "100%", fontSize: fontSize.large, padding: spacing.md, marginBottom: spacing.md };
        const buttonSecondary = { ...buttonPrimary, backgroundColor: colors.darkGray, border: `1px solid ${colors.mediumGray}`, color: colors.white };
        
        return (
          <div>
            <h2 style={{ ...commonStyles.heading, textAlign: "center", color: colors.white, marginBottom: spacing.xl }}>회원가입</h2>
            {step === 1 && (
              <div>
                <p style={{ textAlign: "center", fontSize: fontSize.xlarge, marginBottom: spacing.md, color: colors.white }}>약관 동의</p>
                {formError && <p style={{ color: colors.error, textAlign: "center", margin: `${spacing.md} 0`, backgroundColor: colors.darkGray, padding: spacing.md, borderRadius: borderRadius.small }}>{formError}</p>}
                <button style={buttonPrimary} onClick={handleNextStep}>다음 단계</button>
                <button style={buttonSecondary} onClick={onNavigateLogin}>로그인 페이지로 돌아가기</button>
              </div>
            )}
            {step === 2 && (
              <form onSubmit={handleRegisterSubmit}>
                <p style={{ textAlign: "center", fontSize: fontSize.xlarge, marginBottom: spacing.md, color: colors.white }}>회원 정보 입력</p>
                <label style={{ display: "block", fontSize: fontSize.medium, color: colors.textLight }}>아이디 (5~12자, 영문/숫자)</label>
                <input name="id" type="text" value={formData.id} onChange={handleInputChange} style={inputStyle} />
                <label style={{ display: "block", fontSize: fontSize.medium, color: colors.textLight }}>비밀번호 (8자 이상, 영문/숫자/특수문자)</label>
                <input name="password" type="password" value={formData.password} onChange={handleInputChange} style={inputStyle} />
                <label style={{ display: "block", fontSize: fontSize.medium, color: colors.textLight }}>이름</label>
                <input name="name" type="text" value={formData.name} onChange={handleInputChange} style={inputStyle} />
                <label style={{ display: "block", fontSize: fontSize.medium, color: colors.textLight }}>이메일</label>
                <input name="email" type="email" value={formData.email} onChange={handleInputChange} style={inputStyle} />
                {formError && <p style={{ color: colors.error, textAlign: "center", margin: `${spacing.md} 0` }}>{formError}</p>}
                <button type="submit" style={buttonPrimary}>회원가입 완료</button>
                <button type="button" style={buttonSecondary} onClick={() => setStep(1)}>이전 단계</button>
              </form>
            )}
          </div>
        );
      }

      // ========== 로그아웃 확인 페이지 ==========
      function LogoutConfirm({ onLogout, onCancel }) {
        return (
          <div style={{ textAlign: "center", color: colors.white }}>
            <h2 style={{ ...commonStyles.heading, textAlign: "center" }}>로그아웃</h2>
            <div style={{ backgroundColor: colors.darkGray, padding: spacing.xxl, borderRadius: borderRadius.medium, marginBottom: spacing.xl }}>
              <p style={{ fontSize: fontSize.xlarge, margin: 0 }}>로그아웃 하시겠습니까?</p>
            </div>
            <button onClick={onLogout} style={{ ...commonStyles.button, backgroundColor: colors.error, color: colors.white, padding: `${spacing.md} ${spacing.xl}`, fontSize: fontSize.large, marginRight: spacing.md }}>예</button>
            <button onClick={onCancel} style={{ ...commonStyles.button, backgroundColor: colors.mediumGray, color: colors.white, padding: `${spacing.md} ${spacing.xl}`, fontSize: fontSize.large }}>아니오</button>
          </div>
        );
      }

      // ========== 회원 탈퇴 페이지 ==========
      function WithdrawPage({ onWithdraw, onCancel }) {
        return (
          <div style={{ textAlign: "center", color: colors.white }}>
            <h2 style={{ ...commonStyles.heading, textAlign: "center" }}>회원 탈퇴</h2>
            <div style={{ backgroundColor: colors.white, color: colors.dark, padding: spacing.xl, borderRadius: borderRadius.medium, marginBottom: spacing.xl }}>
              <p style={{ fontSize: fontSize.xlarge, margin: 0, fontWeight: fontWeight.bold, marginBottom: spacing.lg }}>로그아웃에 성공하였습니다!</p>
              <div style={{ backgroundColor: colors.lightGray, padding: spacing.lg, borderRadius: borderRadius.small, marginBottom: spacing.lg, textAlign: "left" }}>
                <p style={{ margin: 0, fontWeight: fontWeight.bold, marginBottom: spacing.sm }}>[회원님께서] 회원탈퇴방법</p>
                <p style={{ margin: 0, fontSize: fontSize.medium, lineHeight: 1.6 }}>
                  안녕하세요, MovieHub입니다.<br /><br />
                  [회원님께서]님의 회원탈퇴 요청을 받았습니다. 아래의 단계를 따라 주세요.<br /><br />
                  <strong>1. 로그인 후 마이페이지 접속</strong><br />
                  2. "회원 정보 관리" 메뉴 선택<br />
                  3. "회원 탈퇴" 버튼 클릭<br />
                  4. 탈퇴 사유 선택 및 비밀번호 확인<br />
                  5. "탈퇴하기" 버튼을 눌러 완료<br /><br />
                  탈퇴 시 모든 데이터가 삭제되며 복구할 수 없습니다.
                </p>
              </div>
            </div>
            <button onClick={onWithdraw} style={{ ...commonStyles.button, backgroundColor: colors.error, color: colors.white, padding: `${spacing.md} ${spacing.xl}`, fontSize: fontSize.large, marginBottom: spacing.md, width: "100%" }}>회원 탈퇴 진행</button>
          </div>
        );
      }

      // ========== 메인 인증 페이지 ==========
      function AuthPage() {
        const [page, setPage] = useState("login");
        const [modal, setModal] = useState({ isVisible: false, type: "", message: "" });
        const [confirmModal, setConfirmModal] = useState({ isVisible: false, message: "" });
        
        const openModal = (type, message) => setModal({ isVisible: true, type, message });
        const closeModal = () => setModal({ isVisible: false, type: "", message: "" });
        
        const handleLoginSuccess = () => {
          openModal("success", "로그인에 성공했습니다.");
        };
        
        const handleRegisterSuccess = (id) => {
          openModal("success", `회원가입에 성공했습니다.\n아이디: ${id}\n\n확인 후 로그인 페이지로 이동합니다.`);
          setTimeout(() => {
            closeModal();
            setPage("login");
          }, 3000);
        };
        
        const handleLogoutAttempt = () => {
          setPage("logoutConfirm");
        };
        
        const handleLogout = () => {
          openModal("success", "로그아웃에 성공하였습니다!");
          setTimeout(() => {
            closeModal();
            setPage("withdraw");
          }, 2000);
        };
        
        const handleWithdraw = () => {
          setConfirmModal({ isVisible: true, message: "정말로 회원 탈퇴를 진행하시겠습니까?" });
        };
        
        const confirmWithdraw = () => {
          setConfirmModal({ isVisible: false, message: "" });
          openModal("success", "회원 탈퇴가 완료되었습니다.\n그동안 이용해주셔서 감사합니다.");
          setTimeout(() => {
            closeModal();
            setPage("login");
          }, 3000);
        };
        
        const containerStyle = { minHeight: "100vh", backgroundColor: colors.dark, color: colors.white, display: "flex", justifyContent: "center", alignItems: "center", padding: spacing.xl };
        const boxStyle = { width: "100%", maxWidth: "500px", padding: spacing.xl, backgroundColor: colors.darkGray, borderRadius: borderRadius.medium, boxShadow: shadow.large };
        
        return (
          <div style={containerStyle}>
            <div style={boxStyle}>
              {page === "login" && <LoginForm onLoginSuccess={handleLoginSuccess} onNavigateRegister={() => setPage("register")} />}
              {page === "register" && <RegisterForm onRegisterSuccess={handleRegisterSuccess} onNavigateLogin={() => setPage("login")} />}
              {page === "logoutConfirm" && <LogoutConfirm onLogout={handleLogout} onCancel={() => setPage("login")} />}
              {page === "withdraw" && <WithdrawPage onWithdraw={handleWithdraw} onCancel={() => setPage("login")} />}
            </div>
            <Modal modal={modal} closeModal={closeModal} />
            <ConfirmModal modal={confirmModal} onConfirm={confirmWithdraw} onCancel={() => setConfirmModal({ isVisible: false, message: "" })} />
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<AuthPage />);
    </script>
  </body>
</html>
