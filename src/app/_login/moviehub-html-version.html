<!DOCTYPE html>

<html lang="ko">

  <head>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MovieHub - 인증 및 상태 페이지 (자동 닫기 2초)</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>

      * { box-sizing: border-box; }

      body { margin: 0; padding: 0; font-family: "Arial", sans-serif; }

      a { cursor: pointer; text-decoration: none; }

      /* 흐릿한 배경 이미지 - public 폴더의 AVATAR.jpg 사용 */

      #background-blur {

        position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0;

        background: url('/AVATAR.jpg') center center / cover no-repeat;

        filter: blur(18px) brightness(0.5); opacity: 1;

      }

      /* UI 오버레이 */

      #root { position: relative; z-index: 1; min-height: 100vh; }

      /* 모바일 대응 */

      @media (max-width: 700px) {

        #background-blur { filter: blur(12px) brightness(0.55); }

      }

      /* 모달 카운트다운 텍스트 스타일 */

      .countdown-text { font-size: 10px; color: #ddd; margin-top: 8px; display: block; }

    </style>

  </head>

  <body>

    <div id="background-blur"></div>

    <div id="root"></div>



    <script type="text/babel">

      const { useState, useEffect } = React;



      // ========== 스타일 토큰 ==========

      const colors = {

        primary:"#E50914", secondary:"#B20710", dark:"#141414", darkGray:"#2F2F2F",

        mediumGray:"#808080", lightGray:"#E5E5E5", white:"#FFFFFF", yellow:"#F5C518",

        success:"#4CAF50", warning:"#FF9800", error:"#F44336", info:"#2196F3",

        textPrimary:"#FFFFFF", textSecondary:"#808080", textLight:"#999999",

      };

      const spacing = { xs:"4px", sm:"8px", md:"16px", lg:"24px", xl:"32px", xxl:"48px" };

      const fontSize = {

        small:"12px", medium:"14px", large:"16px", xlarge:"20px", xxlarge:"24px", title:"32px"

      };

      const fontWeight = { normal:400, bold:700 };

      const borderRadius = { small:"4px", medium:"8px", large:"12px" };

      const shadow = { header:'0 2px 8px rgba(0,0,0,0.3)' };



      // 영화 장르 목록

      const movieGenres = ['액션','키즈','모험','로맨스','공포','가족','스릴러','다큐멘터리','애니메이션','범죄','TV드라마','단편','드라마','판타지','SF','코미디'];



      // ========== 공통 스타일 함수 ==========

      const getButtonStyle = (bg,color) => ({

        backgroundColor:bg, color:color, padding:`${spacing.sm} ${spacing.lg}`, border:"none",

        borderRadius:borderRadius.small, cursor:"pointer", fontSize:fontSize.medium, fontWeight:fontWeight.bold

      });



      // ========== 헤더 컴포넌트 (변경 없음) ==========

      function Header({ isLoggedIn,onLoginClick,onRegisterClick,onLogoutAttempt }) {

        const [searchTerm,setSearchTerm]=useState('');

        const headerStyle={ backgroundColor:colors.dark, padding:`${spacing.md} ${spacing.xl}`,

          display:'flex', justifyContent:'space-between', alignItems:'center',

          boxShadow:shadow.header, position:'fixed', top:0,left:0,right:0,zIndex:999

        };

        const logoStyle={ fontSize:fontSize.xxlarge, color:colors.primary, fontWeight:fontWeight.bold, margin:0 };

        const searchInputStyle={ padding:spacing.sm, borderRadius:borderRadius.small,

          border:`1px solid ${colors.mediumGray}`, backgroundColor:colors.darkGray,

          color:colors.white, width:'250px', fontSize:fontSize.medium

        };

        return (

          <div style={headerStyle}>

            <h1 style={logoStyle}>🎬 MovieHub</h1>

            <div style={{display:'flex',alignItems:'center',gap:spacing.md}}>

              <input type="text" placeholder="영화, 감독, 배우 검색..." value={searchTerm}

                onChange={e=>setSearchTerm(e.target.value)} style={searchInputStyle}/>

              {isLoggedIn?

                <>

                  <button style={getButtonStyle(colors.darkGray,colors.white)}>마이페이지</button>

                  <button onClick={onLogoutAttempt} style={getButtonStyle(colors.primary,colors.white)}>로그아웃</button>

                </>:

                <>

                  <button onClick={onLoginClick} style={getButtonStyle(colors.primary,colors.white)}>로그인</button>

                  <button onClick={onRegisterClick} style={getButtonStyle(colors.darkGray,colors.white)}>회원가입</button>

                </>

              }

            </div>

          </div>

        );

      }



      // ========== 모달 (자동 닫기 시간 2초로 변경) ==========

      function Modal({ modal,closeModal }) {

        const [countdown,setCountdown]=useState(2); // 초기 카운트다운을 2초로 설정



        useEffect(()=>{

          let t,i;

          if(modal.isVisible){

            setCountdown(2); // 모달이 열릴 때마다 카운트다운을 2초로 초기화

            

            // 2초 후 자동 닫기

            t=setTimeout(closeModal,2000); 

            

            // 카운트다운 텍스트 업데이트 (1초마다)

            i=setInterval(()=>setCountdown(c=>c-1),1000); 

          }

          return ()=>{ clearTimeout(t); clearInterval(i); };

        },[modal.isVisible]);

        

        if(!modal.isVisible) return null;

        let headerText="",headerColor="";

        if(modal.type==="success"){ headerText="✔"; headerColor=colors.success;}

        else if(modal.type==="error"){ headerText="❗"; headerColor=colors.error;}

        else if(modal.type==="warning"){ headerText="⚠"; headerColor=colors.warning;}

        

        return (

          <div style={{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",

              display:"flex",justifyContent:"center",alignItems:"center",zIndex:1000}}>

            <div style={{backgroundColor:colors.darkGray,padding:spacing.xl,borderRadius:borderRadius.medium,

                width:"350px",textAlign:"center",color:colors.white}}>

              <div style={{fontSize:fontSize.xxlarge,marginBottom:spacing.md,fontWeight:fontWeight.bold,color:headerColor}}>

                {headerText}

              </div>

              <p style={{whiteSpace:"pre-wrap",margin:0,fontSize:fontSize.large,lineHeight:1.6}}>

                {modal.message}

              </p>

              <button onClick={closeModal} style={getButtonStyle(headerColor,colors.white)}>확인</button>

              <span className="countdown-text">{countdown>0?`${countdown}초 후 자동 확인됩니다.`:'처리 중...'}</span>

            </div>

          </div>

        );

      }



      // ========== 확인 모달 (변경 없음, 자동 닫기 기능 제외) ==========

      function ConfirmModal({ modal,onConfirm,onCancel }) {

        if(!modal.isVisible) return null;

        return (

          <div style={{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",

              display:"flex",justifyContent:"center",alignItems:"center",zIndex:1000}}>

            <div style={{backgroundColor:colors.darkGray,padding:spacing.xl,borderRadius:borderRadius.medium,

                width:"300px",textAlign:"center",color:colors.white}}>

              <p style={{margin:0,fontSize:fontSize.xlarge,marginBottom:spacing.lg,fontWeight:fontWeight.bold}}>

                {modal.message}

              </p>

              <div style={{display:"flex",gap:spacing.md,justifyContent:"center"}}>

                <button onClick={onConfirm} style={getButtonStyle(colors.primary,colors.white)}>

                  {modal.confirmText||'확인'}

                </button>

                <button onClick={onCancel} style={getButtonStyle(colors.mediumGray,colors.white)}>

                  {modal.cancelText||'취소'}

                </button>

              </div>

            </div>

          </div>

        );

      }



      // ========== 로그인 폼 (변경 없음) ==========

      function LoginForm({ onLoginSuccess,onNavigateRegister }) {

        const [id,setId]=useState(""),[password,setPassword]=useState(""),[error,setError]=useState("");

        const handleSubmit=e=>{

          e.preventDefault(); setError("");

          if(!id||!password){setError("아이디와 비밀번호를 모두 입력해주세요.");return;}

          if(id==="team3"&&password==="1234") onLoginSuccess(id);

          else if(id==="test") setError("비밀번호가 잘못되었습니다. 아이디와 비밀번호를 정확히 입력해 주세요.");

          else setError("아이디 또는 비밀번호가 일치하지 않습니다.");

        };

        const inputStyle={width:"100%",backgroundColor:colors.darkGray,border:`1px solid ${colors.mediumGray}`,

          color:colors.white,padding:spacing.md,marginBottom:spacing.lg,marginTop:spacing.xs,borderRadius:borderRadius.small};

        const btnStyle={width:"100%",backgroundColor:colors.primary,color:colors.white,fontSize:fontSize.large,

          padding:spacing.md,border:"none",borderRadius:borderRadius.small,cursor:"pointer"};



        return (

          <div>

            <h2 style={{textAlign:"center",color:colors.white,marginBottom:spacing.xl,fontSize:fontSize.title}}>로그인</h2>

            {error&&<div style={{backgroundColor:colors.error,color:colors.white,padding:spacing.lg,borderRadius:borderRadius.small,marginBottom:spacing.lg,textAlign:"center"}}>

              <p style={{margin:0,fontSize:fontSize.large,fontWeight:fontWeight.bold}}>❗ {error}</p>

            </div>}

            <form onSubmit={handleSubmit}>

              <label style={{display:"block",fontSize:fontSize.medium,color:colors.textLight}}>아이디</label>

              <input type="text" value={id} onChange={e=>setId(e.target.value)} placeholder="아이디를 입력하세요." style={inputStyle}/>

              <label style={{display:"block",fontSize:fontSize.medium,color:colors.textLight}}>비밀번호</label>

              <input type="password" value={password} onChange={e=>setPassword(e.target.value)} placeholder="비밀번호를 입력하세요." style={inputStyle}/>

              <button type="submit" style={btnStyle}>로그인</button>

            </form>

            <div style={{marginTop:spacing.xl,textAlign:"center"}}>

              <a onClick={onNavigateRegister} style={{color:colors.mediumGray,textDecoration:"none",display:"block",marginBottom:spacing.sm}}>

                회원가입

              </a>

              <a href="#" style={{color:colors.mediumGray,textDecoration:"none",display:"block"}}>

                아이디 / 비밀번호 찾기

              </a>

            </div>

          </div>

        );

      }



      // ========== 회원가입 폼 (변경 없음) ==========

      function RegisterForm({ onRegisterSuccess,onNavigateLogin }) {

        const [step,setStep]=useState(1);

        const [terms,setTerms]=useState({t1:false,t2:false,t3:false});

        const [allChecked,setAllChecked]=useState(false);

        const [data,setData]=useState({id:"",password:"",confirm:"",name:"",email:"",phone:"",liked:[],disliked:[]});

        const [error,setError]=useState("");

        

        useEffect(()=>setAllChecked(terms.t1&&terms.t2&&terms.t3),[terms]);

        const toggleAll=e=>setTerms({t1:e.target.checked,t2:e.target.checked,t3:e.target.checked});

        const toggleTerm=n=>setTerms(prev=>({...prev,[n]:!prev[n]}));

        const toggleGenre=(g,t)=>{

          const field=t==="like"?"liked":"disliked";

          setData(prev=>{

            const list=prev[field].includes(g)?prev[field].filter(x=>x!==g):[...prev[field],g];

            return {...prev,[field]:list};

          });

        };

        const nextStep=()=>{

          if(!terms.t1||!terms.t2){setError("필수 약관에 동의해야 다음 단계로 진행할 수 있습니다.");return;}

          setError("");setStep(2);

        };

        const change=e=>setData({...data,[e.target.name]:e.target.value});

        const submit=e=>{

          e.preventDefault();

          if(data.password!==data.confirm){setError("비밀번호와 비밀번호 확인이 일치하지 않습니다.");return;}

          if(data.liked.length===0){setError("좋아하는 영화 장르를 최소 1개 이상 선택해주세요.");return;}

          if(data.disliked.length===0){setError("싫어하는 영화 장르를 최소 1개 이상 선택해주세요.");return;}

          onRegisterSuccess(data.id);

        };

        

        const inputStyle={width:"100%",backgroundColor:colors.darkGray,border:`1px solid ${colors.mediumGray}`,color:colors.white,padding:spacing.md,marginBottom:spacing.lg,marginTop:spacing.xs,borderRadius:borderRadius.small};

        const pStyle={width:"100%",backgroundColor:colors.primary,color:colors.white,fontSize:fontSize.large,padding:spacing.md,marginBottom:spacing.md,border:"none",borderRadius:borderRadius.small,cursor:"pointer"};

        const sStyle={width:"100%",backgroundColor:colors.darkGray,border:`1px solid ${colors.mediumGray}`,color:colors.white,fontSize:fontSize.large,padding:spacing.md,borderRadius:borderRadius.small,cursor:"pointer"};

        const box={border:`1px solid ${colors.mediumGray}`,padding:spacing.md,borderRadius:borderRadius.small,marginBottom:spacing.sm,backgroundColor:colors.dark};

        const cb={marginRight:spacing.sm,width:"16px",height:"16px",cursor:"pointer"};



        return (

          <div>

            <h2 style={{textAlign:"center",color:colors.white,marginBottom:spacing.xl,fontSize:fontSize.title}}>회원가입</h2>

            {step===1?

              <div>

                <p style={{textAlign:"center",fontSize:fontSize.xlarge,marginBottom:spacing.md,color:colors.white}}>약관 동의</p>

                <div style={{marginBottom:spacing.lg,padding:spacing.md,backgroundColor:colors.darkGray,borderRadius:borderRadius.small}}>

                  <label style={{display:"flex",alignItems:"center",fontWeight:fontWeight.bold,color:colors.white,cursor:"pointer"}}>

                    <input type="checkbox" checked={allChecked} onChange={toggleAll} style={cb}/>

                    <span>전체 약관에 동의합니다.</span>

                  </label>

                </div>

                {[{key:'t1',text:'(필수) 이용 약관 동의',required:true},

                  {key:'t2',text:'(필수) 개인정보 수집 및 이용 동의',required:true},

                  {key:'t3',text:'(선택) 마케팅 정보 수신 동의',required:false}]

                  .map(term=>(

                    <div key={term.key} style={box}>

                      <label style={{display:"flex",alignItems:"center",color:colors.white,cursor:"pointer"}}>

                        <input type="checkbox" checked={terms[term.key]} onChange={()=>toggleTerm(term.key)} style={cb}/>

                        <span>{term.text}</span>

                      </label>

                    </div>

                  ))}

                {error&&<p style={{color:colors.error,textAlign:"center",margin:`${spacing.md} 0`}}>{error}</p>}

                <button style={pStyle} onClick={nextStep}>다음 단계</button>

                <button style={sStyle} onClick={onNavigateLogin}>로그인 페이지로 돌아가기</button>

              </div>:

              <form onSubmit={submit}>

                <p style={{textAlign:"center",fontSize:fontSize.xlarge,marginBottom:spacing.md,color:colors.white}}>회원 정보 입력</p>

                <label style={{display:"block",fontSize:fontSize.medium,color:colors.textLight}}>이메일</label>

                <input name="email" type="email" value={data.email} onChange={change} placeholder="example@moviehub.com" style={inputStyle}/>

                <label style={{display:"block",fontSize:fontSize.medium,color:colors.textLight}}>비밀번호</label>

                <input name="password" type="password" value={data.password} onChange={change} style={inputStyle}/>

                <label style={{display:"block",fontSize:fontSize.medium,color:colors.textLight}}>비밀번호 확인</label>

                <input name="confirm" type="password" value={data.confirm} onChange={change} style={inputStyle}/>

                <label style={{display:"block",fontSize:fontSize.medium,color:colors.textLight}}>이름</label>

                <input name="name" type="text" value={data.name} onChange={change} style={inputStyle}/>

                <label style={{display:"block",fontSize:fontSize.medium,color:colors.textLight}}>전화번호</label>

                <input name="phone" type="tel" value={data.phone} onChange={change} placeholder="010-0000-0000" style={inputStyle}/>

                

                <label style={{display:"block",fontSize:fontSize.medium,color:colors.textLight,marginTop:spacing.md,marginBottom:spacing.sm}}>좋아하는 영화 장르 (필수)</label>

                <div style={{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:spacing.sm,marginBottom:spacing.lg}}>

                  {movieGenres.map(genre=>(

                    <label key={genre} style={{display:"flex",alignItems:"center",color:colors.white,cursor:"pointer",backgroundColor:colors.darkGray,padding:spacing.sm,borderRadius:borderRadius.small}}>

                      <input type="checkbox" checked={data.liked.includes(genre)} onChange={()=>toggleGenre(genre,'like')} style={cb}/>

                      <span>{genre}</span>

                    </label>

                  ))}

                </div>



                <label style={{display:"block",fontSize:fontSize.medium,color:colors.textLight,marginTop:spacing.md,marginBottom:spacing.sm}}>싫어하는 영화 장르 (필수)</label>

                <div style={{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:spacing.sm,marginBottom:spacing.lg}}>

                  {movieGenres.map(genre=>(

                    <label key={genre} style={{display:"flex",alignItems:"center",color:colors.white,cursor:"pointer",backgroundColor:colors.darkGray,padding:spacing.sm,borderRadius:borderRadius.small}}>

                      <input type="checkbox" checked={data.disliked.includes(genre)} onChange={()=>toggleGenre(genre,'disliked')} style={cb}/>

                      <span>{genre}</span>

                    </label>

                  ))}

                </div>

                

                {error&&<p style={{color:colors.error,textAlign:"center",margin:`${spacing.md} 0`}}>{error}</p>}

                <button type="submit" style={pStyle}>회원가입 완료</button>

                <button type="button" style={sStyle} onClick={()=>setStep(1)}>이전 단계</button>

              </form>

            }

          </div>

        );

      }



      // ========== 로그인 후 메인 화면 (변경 없음) ==========

      function MainPage({ username,onLogout }) {

        return (

          <div style={{textAlign:"center",color:colors.white,paddingTop:spacing.xxl}}>

            <div style={{backgroundColor:colors.darkGray,padding:spacing.xxl,borderRadius:borderRadius.medium,marginBottom:spacing.xl}}>

              <p style={{fontSize:fontSize.xlarge,margin:0,fontWeight:fontWeight.bold}}>🎉🎬Moviehub에 오신 것을 환영합니다!🎉</p>

            </div>

            <button onClick={onLogout} style={getButtonStyle(colors.primary,colors.white)}>로그아웃</button>

          </div>

        );

      }



      // ========== 로그아웃 성공 페이지 (변경 없음) ==========

      function LogoutSuccessPage({ onReturnToLogin }) {

        return (

          <div style={{textAlign:"center",color:colors.white,paddingTop:spacing.xxl}}>

            <div style={{backgroundColor:colors.success,padding:spacing.xxl,borderRadius:borderRadius.medium,marginBottom:spacing.xl}}>

              <p style={{fontSize:fontSize.xlarge,margin:0,fontWeight:fontWeight.bold,color:colors.white}}>로그아웃에 성공하였습니다!</p>

            </div>

            <button onClick={onReturnToLogin} style={getButtonStyle(colors.primary,colors.white)}>로그인 페이지로 이동</button>

          </div>

        );

      }



      // ========== 메인 앱 (변경 없음) ==========

      function AuthPage() {

        const [isLoggedIn,setIsLoggedIn]=useState(false);

        const [page,setPage]=useState("login");

        const [username,setUsername]=useState("");

        const [modal,setModal]=useState({isVisible:false,type:"",message:""});

        const [confirmModal,setConfirmModal]=useState({isVisible:false,message:"",action:""});



        const openModal=(t,m)=>setModal({isVisible:true,type:t,message:m});

        const closeModal=()=>{

          if(modal.type==="success"&&page==="register") setPage("login");

          setModal({isVisible:false,type:"",message:""});

        };

        const handleLogin=id=>{

          setUsername(id);setIsLoggedIn(true);

          openModal("success",`${id}님, 환영합니다!`);

          setPage("main");

        };

        const handleRegister=id=>openModal("success",`환영합니다, 김새싹님! 회원가입을 축하합니다!\ 메인 페이지로 이동합니다.`);

        const attemptLogout=()=>setConfirmModal({isVisible:true,message:"로그아웃 하시겠습니까?",action:"logout"});

        const confirmLogout=()=>{setConfirmModal({isVisible:false,message:"",action:""});setIsLoggedIn(false);setUsername("");setPage("logoutSuccess");};

        const handleConfirm=()=>confirmLogout();

        const handleCancel=()=>setConfirmModal({isVisible:false,message:"",action:""});



        return (

          <>

            <Header isLoggedIn={isLoggedIn} onLoginClick={()=>setPage("login")} onRegisterClick={()=>setPage("register")} onLogoutAttempt={attemptLogout}/>

            <div style={{minHeight:"100vh",backgroundColor:colors.dark,color:colors.white,display:"flex",justifyContent:"center",alignItems:"center",padding:spacing.xl,paddingTop:`calc(${spacing.xl}+60px)`}}>

              <div style={{width:"100%",maxWidth:"450px",padding:spacing.xl,backgroundColor:colors.darkGray,borderRadius:borderRadius.medium,boxShadow:"0 8px 16px rgba(0,0,0,0.2)"}}>

                {page==="login"&&<LoginForm onLoginSuccess={handleLogin} onNavigateRegister={()=>setPage("register")}/>}

                {page==="register"&&<RegisterForm onRegisterSuccess={handleRegister} onNavigateLogin={()=>setPage("login")}/>}

                {page==="main"&&<MainPage username={username} onLogout={attemptLogout}/>}

                {page==="logoutSuccess"&&<LogoutSuccessPage onReturnToLogin={()=>setPage("login")}/>}

              </div>

            </div>

            <Modal modal={modal} closeModal={closeModal}/>

            <ConfirmModal modal={confirmModal} onConfirm={handleConfirm} onCancel={handleCancel}/>

          </>

        );

      }



      ReactDOM.createRoot(document.getElementById("root")).render(<AuthPage />);

    </script>

  </body>

</html> 