<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MovieHub - ì¸ì¦ ë° ìƒíƒœ í˜ì´ì§€ (Vanilla JS - ìµœì¢… í•´ê²°)</title>
    <style>
        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; font-family: "Arial", sans-serif; }
        a { cursor: pointer; text-decoration: none; }
        #background-blur {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0;
            background: url('https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyNTA0MjJfMjgg%2FMDAxNzQ1MjQ5NTI0OTEx.oxs6IPzSZoyp7y7_JFJ5FCt0hL31OxVPhgnO5D5WaVgg.RYofXxz-Z_iMf_55kkWkfTmzvfHPUTgXJRAhUwR4e1sg.JPEG%2FKakaoTalk_20250422_002127317_08.jpg&type=sc960_832') center center / cover no-repeat;
            filter: blur(5px) brightness(0.5); opacity: 1;
        }
        /* UI ì˜¤ë²„ë ˆì´ */
        #root { position: relative; z-index: 1; min-height: 100vh; }
        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 700px) {
            #background-blur { filter: blur(12px) brightness(0.55); }
        }
        /* ëª¨ë‹¬ ì¹´ìš´íŠ¸ë‹¤ìš´ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .countdown-text { font-size: 10px; color: #ddd; margin-top: 8px; display: block; }
    </style>
</head>
<body>
    <div id="background-blur"></div>
    <div id="root"></div>

    <script>

        //  ìƒíƒœ ê´€ë¦¬ ë° ìœ í‹¸ë¦¬í‹° 
        

        let state = {
            isLoggedIn: false,
            page: "login",
            username: "",
            modal: { isVisible: false, type: "", message: "" },
            confirmModal: { isVisible: false, message: "", action: "", confirmText: 'í™•ì¸', cancelText: 'ì·¨ì†Œ' },
            loginForm: { id: "", password: "", formError: "" },
            registerForm: { 
                step: 1, 
                // ì•½ê´€ ë™ì˜ ìƒíƒœë¥¼ ëª…í™•íˆ êµ¬ë¶„í•˜ì—¬ ë‹¤ì‹œ ì„¤ì •
                terms: { term1: false, term2: false, term3: false },
                formData: { password: "", confirm: "", name: "", email: "", phone: "", liked: [], disliked: [] },
                formError: ""
            },
            _modalTimer: null,
            _modalCountdownInterval: null,
            _modalOpenTime: null
        };

        const rootElement = document.getElementById("root");
        
        // ìƒíƒœ ì—…ë°ì´íŠ¸ ë° UI ë¦¬ë Œë”ë§ í•¨ìˆ˜
        function setState(newState, shouldRender = true) {
            const nextState = { ...state };

            if (newState.loginForm) { nextState.loginForm = { ...nextState.loginForm, ...newState.loginForm }; }
            if (newState.registerForm) {
                nextState.registerForm = { ...nextState.registerForm, ...newState.registerForm };
                if (newState.registerForm.formData) { nextState.registerForm.formData = { ...nextState.registerForm.formData, ...newState.registerForm.formData }; }
                if (newState.registerForm.terms) { nextState.registerForm.terms = { ...nextState.registerForm.terms, ...newState.registerForm.terms }; }
            }
            
            for (const key in newState) {
                if (key !== 'loginForm' && key !== 'registerForm') { nextState[key] = newState[key]; }
            }
            
            state = nextState;
            if (shouldRender) renderApp();
        }

        // DOM ìš”ì†Œ ìƒì„± í—¬í¼ í•¨ìˆ˜
        function createElement(tag, attributes = {}, styles = {}, children = []) {
            const element = document.createElement(tag);
            Object.keys(attributes).forEach(key => {
                if (key.startsWith('on')) { 
                    element[key.toLowerCase()] = attributes[key]; 
                } else if (key === 'value' || key === 'checked' || key === 'placeholder' || key === 'name' || key === 'type') {
                    element[key] = attributes[key]; 
                } else { 
                    element.setAttribute(key, attributes[key]); 
                }
            });
            Object.keys(styles).forEach(key => { element.style[key] = styles[key]; });
            children.forEach(child => {
                if (typeof child === 'string') { element.appendChild(document.createTextNode(child)); } 
                else if (child instanceof Node) { element.appendChild(child); }
            });
            return element;
        }

        // ìŠ¤íƒ€ì¼ í† í° 
        const colors = { primary:"#E50914", secondary:"#B20710", dark:"#141414", darkGray:"#2F2F2F", mediumGray:"#808080", lightGray:"#E5E5E5", white:"#FFFFFF", yellow:"#F5C518", success:"#4CAF50", warning:"#FF9800", error:"#F44336", info:"#2196F3", textPrimary:"#FFFFFF", textSecondary:"#808080", textLight:"#999999", };
        const spacing = { xs:"4px", sm:"8px", md:"16px", lg:"24px", xl:"32px", xxl:"48px" };
        const fontSize = { small:"12px", medium:"14px", large:"16px", xlarge:"20px", xxlarge:"24px", title:"32px" };
        const fontWeight = { normal:400, bold:700 };
        const borderRadius = { small:"4px", medium:"8px", large:"12px" };
        const shadow = { header:'0 2px 8px rgba(0,0,0,0.3)' };
        const movieGenres = ['ì•¡ì…˜','í‚¤ì¦ˆ','ëª¨í—˜','ë¡œë§¨ìŠ¤','ê³µí¬','ê°€ì¡±','ìŠ¤ë¦´ëŸ¬','ë‹¤íë©˜í„°ë¦¬','ì• ë‹ˆë©”ì´ì…˜','ë²”ì£„','TVë“œë¼ë§ˆ','ë‹¨í¸','ë“œë¼ë§ˆ','íŒíƒ€ì§€','SF','ì½”ë¯¸ë””'];
        const getButtonStyle = (bg,color) => ({ backgroundColor:bg, color:color, padding:`${spacing.sm} ${spacing.lg}`, border:"none", borderRadius:borderRadius.small, cursor:"pointer", fontSize:fontSize.medium, fontWeight:fontWeight.bold });

       
        // ëª¨ë‹¬ ë° ì•Œë¦¼ í•¨ìˆ˜
        
        function cleanupModalTimers() {
            if (state._modalTimer) clearTimeout(state._modalTimer);
            if (state._modalCountdownInterval) clearInterval(state._modalCountdownInterval);
            state._modalTimer = null;
            state._modalCountdownInterval = null;
            state._modalOpenTime = null;
        }

        function openModal(type, message) {
            cleanupModalTimers();
            setState({ modal: { isVisible: true, type, message }, _modalOpenTime: Date.now() });
            
            state._modalTimer = setTimeout(closeModal, 2000);
            state._modalCountdownInterval = setInterval(renderApp, 1000);
        }

        function closeModal() {
            cleanupModalTimers();
            if (state.modal.type === "success" && state.page === "register") {
                setState({ page: "login" });
            }
            setState({ modal: { isVisible: false, type: "", message: "" } });
        }
        
        function renderModal() {
            const { modal } = state;
            if (!modal.isVisible) return null;

            const remainingTime = Math.max(0, Math.ceil((2000 - (Date.now() - (state._modalOpenTime || Date.now()))) / 1000));
            
            const handleClose = () => { cleanupModalTimers(); closeModal(); };
            
            let headerText = "", headerColor = "";
            if (modal.type === "success") { headerText = "âœ”"; headerColor = colors.success; }
            else if (modal.type === "error") { headerText = "â—"; headerColor = colors.error; }
            else if (modal.type === "warning") { headerText = "âš "; headerColor = colors.warning; }

            const modalOverlay = createElement('div', {}, { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, backgroundColor: "rgba(0,0,0,0.7)", display: "flex", justifyContent: "center", alignItems: "center", zIndex: 1000 });
            const modalContent = createElement('div', {}, { backgroundColor: colors.darkGray, padding: spacing.xl, borderRadius: borderRadius.medium, width: "350px", textAlign: "center", color: colors.white }, [
                createElement('div', {}, { fontSize: fontSize.xxlarge, marginBottom: spacing.md, fontWeight: fontWeight.bold, color: headerColor }, [headerText]),
                createElement('p', {}, { whiteSpace: "pre-wrap", margin: 0, fontSize: fontSize.large, lineHeight: 1.6 }, [modal.message]),
                createElement('button', { onclick: handleClose }, getButtonStyle(headerColor, colors.white), ["í™•ì¸"]),
                createElement('span', { className: "countdown-text" }, {}, [`${remainingTime}ì´ˆ í›„ ìë™ í™•ì¸ë©ë‹ˆë‹¤.`])
            ]);
            
            modalOverlay.appendChild(modalContent);
            return modalOverlay;
        }

        function renderConfirmModal() {
            const { confirmModal } = state;
            if (!confirmModal.isVisible) return null;

            const handleConfirm = () => { if (confirmModal.action === "logout") confirmLogout(); };
            const handleCancel = () => setState({ confirmModal: { isVisible: false, message: "", action: "" } });

            const modalOverlay = createElement('div', {}, { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, backgroundColor: "rgba(0,0,0,0.7)", display: "flex", justifyContent: "center", alignItems: "center", zIndex: 1000 });
            const buttonGroup = createElement('div', {}, { display: "flex", gap: spacing.md, justifyContent: "center" }, [
                createElement('button', { onclick: handleConfirm }, getButtonStyle(colors.primary, colors.white), [confirmModal.confirmText || 'í™•ì¸']),
                createElement('button', { onclick: handleCancel }, getButtonStyle(colors.mediumGray, colors.white), [confirmModal.cancelText || 'ì·¨ì†Œ'])
            ]);
            const modalContent = createElement('div', {}, { backgroundColor: colors.darkGray, padding: spacing.xl, borderRadius: borderRadius.medium, width: "300px", textAlign: "center", color: colors.white }, [
                createElement('p', {}, { margin: 0, fontSize: fontSize.xlarge, marginBottom: spacing.lg, fontWeight: fontWeight.bold }, [confirmModal.message]),
                buttonGroup
            ]);

            modalOverlay.appendChild(modalContent);
            return modalOverlay;
        }

        // ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ í•¨ìˆ˜

        function renderHeader() {
            const { isLoggedIn } = state;
            const attemptLogout = () => setState({ confirmModal: { isVisible: true, message: "ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?", action: "logout" } });

            const headerStyle={ backgroundColor:colors.dark, padding:`${spacing.md} ${spacing.xl}`, display:'flex', justifyContent:'space-between', alignItems:'center', boxShadow:shadow.header, position:'fixed', top:0,left:0,right:0,zIndex:999 };
            const logoStyle={ fontSize:fontSize.xxlarge, color:colors.primary, fontWeight:fontWeight.bold, margin:0 };
            const searchInputStyle={ padding:spacing.sm, borderRadius:borderRadius.small, border:`1px solid ${colors.mediumGray}`, backgroundColor:colors.darkGray, color:colors.white, width:'250px', fontSize:fontSize.medium };

            const searchInput = createElement('input', { type: "text", placeholder: "ì˜í™”, ê°ë…, ë°°ìš° ê²€ìƒ‰..." }, searchInputStyle);

            const actionButtons = [];
            if (isLoggedIn) {
                actionButtons.push(createElement('button', {}, getButtonStyle(colors.darkGray, colors.white), ["ë§ˆì´í˜ì´ì§€"]));
                actionButtons.push(createElement('button', { onclick: attemptLogout }, getButtonStyle(colors.primary, colors.white), ["ë¡œê·¸ì•„ì›ƒ"]));
            } else {
                actionButtons.push(createElement('button', { onclick: () => setState({ page: "login" }) }, getButtonStyle(colors.primary, colors.white), ["ë¡œê·¸ì¸"]));
                actionButtons.push(createElement('button', { onclick: () => setState({ page: "register" }) }, getButtonStyle(colors.darkGray, colors.white), ["íšŒì›ê°€ì…"]));
            }

            const headerDiv = createElement('div', {}, headerStyle, [
                createElement('h1', {}, logoStyle, ["ğŸ¬ MovieHub"]),
                createElement('div', {}, { display: 'flex', alignItems: 'center', gap: spacing.md }, [searchInput, ...actionButtons])
            ]);

            return headerDiv;
        }

        function renderLoginForm() {
            const { id, password, formError } = state.loginForm;

            const updateField = (name, value) => {
                setState({ loginForm: { [name]: value } }, false); 
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                const currentId = state.loginForm.id;
                const currentPassword = state.loginForm.password;

                if (!currentId || !currentPassword) {
                    setState({ loginForm: { formError: "ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”." } });
                    return;
                }
                if (currentId === "team3" && currentPassword === "1234") {
                    handleLoginSuccess(currentId);
                } else if (currentId === "test") {
                    setState({ loginForm: { formError: "ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”." } });
                } else {
                    setState({ loginForm: { formError: "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”." } });
                }
            };
            
            const inputStyle={width:"100%",backgroundColor:colors.darkGray,border:`1px solid ${colors.mediumGray}`, color:colors.white,padding:spacing.md,marginBottom:spacing.lg,marginTop:spacing.xs,borderRadius:borderRadius.small};
            const btnStyle={width:"100%",backgroundColor:colors.primary,color:colors.white,fontSize:fontSize.large,padding:spacing.md,border:"none",borderRadius:borderRadius.small,cursor:"pointer"};

            const form = createElement('form', { onsubmit: handleSubmit }, {}, [
                createElement('label', {}, {display:"block",fontSize:fontSize.medium,color:colors.textLight}, ["ì•„ì´ë””"]),
                createElement('input', { name: "id", type: "text", value: id, oninput: (e) => updateField('id', e.target.value), placeholder: "ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”." }, inputStyle),
                createElement('label', {}, {display:"block",fontSize:fontSize.medium,color:colors.textLight}, ["ë¹„ë°€ë²ˆí˜¸"]),
                createElement('input', { name: "password", type: "password", value: password, oninput: (e) => updateField('password', e.target.value), placeholder: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”." }, inputStyle),
                createElement('button', { type: "submit" }, btnStyle, ["ë¡œê·¸ì¸"])
            ]);

            const links = createElement('div', {}, {marginTop:spacing.xl,textAlign:"center"}, [
                createElement('a', { onclick: () => setState({ page: "register" }) }, 
                    {color:colors.mediumGray,textDecoration:"none",display:"block",marginBottom:spacing.sm}, ["íšŒì›ê°€ì…"]),
                createElement('a', { href: "#" }, 
                    {color:colors.mediumGray,textDecoration:"none",display:"block"}, ["ì•„ì´ë”” / ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°"])
            ]);

            const errorDiv = formError ? createElement('div', {}, {backgroundColor:colors.error,color:colors.white,padding:spacing.lg,borderRadius:borderRadius.small,marginBottom:spacing.lg,textAlign:"center"}, [
                createElement('p', {}, {margin:0,fontSize:fontSize.large,fontWeight:fontWeight.bold}, [`â— ${formError}`])
            ]) : document.createDocumentFragment();

            return createElement('div', {}, {}, [
                createElement('h2', {}, {textAlign:"center",color:colors.white,marginBottom:spacing.xl,fontSize:fontSize.title}, ["ë¡œê·¸ì¸"]),
                errorDiv,
                form,
                links
            ]);
        }

        function renderRegisterForm() {
            const { step, terms, formData, formError } = state.registerForm;
            const { liked, disliked } = formData;
            // termsì˜ ëª¨ë“  í•„ìˆ˜ í•­ëª©ì´ trueì¸ì§€ í™•ì¸
            const allChecked = terms.term1 && terms.term2 && terms.term3;

            const updateField = (name, value) => {
                setState({ registerForm: { formData: { ...formData, [name]: value } } }, false); // ì…ë ¥ ì‹œ ë Œë”ë§ X
            };

            const updateTerm = (name, checked) => {
                setState({ registerForm: { terms: { ...terms, [name]: checked } } });
            };

            const toggleAll = (e) => {
                const checked = e.target.checked;
                setState({ registerForm: { terms: { term1: checked, term2: checked, term3: checked } } });
            };

            const toggleGenre = (genre, type) => {
                const field = type === 'like' ? 'liked' : 'disliked';
                const list = formData[field].includes(genre)
                    ? formData[field].filter(g => g !== genre)
                    : [...formData[field], genre];
                setState({ registerForm: { formData: { ...formData, [field]: list } } });
            };

            const nextStep = () => {
                // í•„ìˆ˜ ì•½ê´€ ê²€ì‚¬: term1, term2
                if (!terms.term1 || !terms.term2) {
                    setState({ registerForm: { formError: "í•„ìˆ˜ ì•½ê´€ì— ë™ì˜í•´ì•¼ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." } });
                    return;
                }
                setState({ registerForm: { formError: "", step: 2 } });
            };
            
            const submit = (e) => {
                e.preventDefault();
                if (formData.password !== formData.confirm) {
                    setState({ registerForm: { formError: "ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." } });
                    return;
                }
                if (liked.length === 0) {
                    setState({ registerForm: { formError: "ì¢‹ì•„í•˜ëŠ” ì˜í™” ì¥ë¥´ë¥¼ ìµœì†Œ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”." } });
                    return;
                }
                if (disliked.length === 0) {
                    setState({ registerForm: { formError: "ì‹«ì–´í•˜ëŠ” ì˜í™” ì¥ë¥´ë¥¼ ìµœì†Œ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”." } });
                    return;
                }
                handleRegisterSuccess(formData.email);
            };

            const inputStyle={width:"100%",backgroundColor:colors.darkGray,border:`1px solid ${colors.mediumGray}`,color:colors.white,padding:spacing.md,marginBottom:spacing.lg,marginTop:spacing.xs,borderRadius:borderRadius.small};
            const pStyle={width:"100%",backgroundColor:colors.primary,color:colors.white,fontSize:fontSize.large,padding:spacing.md,marginBottom:spacing.md,border:"none",borderRadius:borderRadius.small,cursor:"pointer"};
            const sStyle={width:"100%",backgroundColor:colors.darkGray,border:`1px solid ${colors.mediumGray}`,color:colors.white,fontSize:fontSize.large,padding:spacing.md,borderRadius:borderRadius.small,cursor:"pointer"};
            const box={border:`1px solid ${colors.mediumGray}`,padding:spacing.md,borderRadius:borderRadius.small,marginBottom:spacing.sm,backgroundColor:colors.dark};
            const cb={marginRight:spacing.sm,width:"16px",height:"16px",cursor:"pointer"};
            
            const errorElement = formError ? createElement('p', {}, {color:colors.error,textAlign:"center",margin:`${spacing.md} 0`}, [formError]) : document.createDocumentFragment();

            let content;
            if (step === 1) {
                content = createElement('div', {}, {}, [
                    createElement('p', {}, {textAlign:"center",fontSize:fontSize.xlarge,marginBottom:spacing.md,color:colors.white}, ["ì•½ê´€ ë™ì˜"]),
                    
                    // ì „ì²´ ë™ì˜
                    createElement('div', {}, {marginBottom:spacing.lg,padding:spacing.md,backgroundColor:colors.darkGray,borderRadius:borderRadius.small}, [
                        createElement('label', {}, {display:"flex",alignItems:"center",fontWeight:fontWeight.bold,color:colors.white,cursor:"pointer"}, [
                            createElement('input', { type: "checkbox", checked: allChecked, onchange: toggleAll }, { ...cb, width: "18px", height: "18px" }),
                            createElement('span', {}, {}, ["ì „ì²´ ì•½ê´€ì— ë™ì˜í•©ë‹ˆë‹¤."])
                        ])
                    ]),
                    
                    // 1. (í•„ìˆ˜) ì´ìš© ì•½ê´€ ë™ì˜
                    createElement('div', {}, box, [
                        createElement('label', {}, {display:"flex",alignItems:"center",color:colors.white,cursor:"pointer"}, [
                            createElement('input', { type: "checkbox", checked: terms.term1, onchange: (e) => updateTerm('term1', e.target.checked) }, cb),
                            createElement('span', {}, {}, ["(í•„ìˆ˜) ì´ìš© ì•½ê´€ ë™ì˜"])
                        ])
                    ]),

                    // 2. (í•„ìˆ˜) ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜
                    createElement('div', {}, box, [
                        createElement('label', {}, {display:"flex",alignItems:"center",color:colors.white,cursor:"pointer"}, [
                            createElement('input', { type: "checkbox", checked: terms.term2, onchange: (e) => updateTerm('term2', e.target.checked) }, cb),
                            createElement('span', {}, {}, ["(í•„ìˆ˜) ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜"])
                        ])
                    ]),
                    
                    // 3. (ì„ íƒ) ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜
                    createElement('div', {}, box, [
                        createElement('label', {}, {display:"flex",alignItems:"center",color:colors.white,cursor:"pointer"}, [
                            createElement('input', { type: "checkbox", checked: terms.term3, onchange: (e) => updateTerm('term3', e.target.checked) }, cb),
                            createElement('span', {}, {}, ["(ì„ íƒ) ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜"])
                        ])
                    ]),

                    errorElement,
                    createElement('button', { onclick: nextStep }, pStyle, ["ë‹¤ìŒ ë‹¨ê³„"]),
                    createElement('button', { onclick: () => setState({ page: "login" }) }, sStyle, ["ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°"])
                ]);
            } else {
                content = createElement('form', { onsubmit: submit }, {}, [
                    createElement('p', {}, {textAlign:"center",fontSize:fontSize.xlarge,marginBottom:spacing.md,color:colors.white}, ["íšŒì› ì •ë³´ ì…ë ¥"]),
                    
                    createElement('label', {}, {display:"block",fontSize:fontSize.medium,color:colors.textLight}, ["ì´ë©”ì¼ *"]),
                    createElement('input', { name: "email", type: "email", value: formData.email, oninput: (e) => updateField('email', e.target.value), placeholder: "example@moviehub.com" }, inputStyle),
                    
                    createElement('label', {}, {display:"block",fontSize:fontSize.medium,color:colors.textLight}, ["ë¹„ë°€ë²ˆí˜¸(4ì ì´ìƒ ì…ë ¥í•˜ì„¸ìš”) *"]),
                    createElement('input', { name: "password", type: "password", value: formData.password, oninput: (e) => updateField('password', e.target.value) }, inputStyle),
                    
                    createElement('label', {}, {display:"block",fontSize:fontSize.medium,color:colors.textLight}, ["ë¹„ë°€ë²ˆí˜¸ í™•ì¸ (ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í•œë²ˆ í™•ì¸í•´ì£¼ì„¸ìš”)*"]),
                    createElement('input', { name: "confirm", type: "password", value: formData.confirm, oninput: (e) => updateField('confirm', e.target.value) }, inputStyle),
                    
                    createElement('label', {}, {display:"block",fontSize:fontSize.medium,color:colors.textLight}, ["ì´ë¦„ *"]),
                    createElement('input', { name: "name", type: "text", value: formData.name, oninput: (e) => updateField('name', e.target.value) }, inputStyle),
                    
                    createElement('label', {}, {display:"block",fontSize:fontSize.medium,color:colors.textLight}, ["ì „í™”ë²ˆí˜¸ *"]),
                    createElement('input', { name: "phone", type: "tel", value: formData.phone, oninput: (e) => updateField('phone', e.target.value), placeholder: "010-0000-0000" }, inputStyle),
                    
                    createElement('label', {}, {display:"block",fontSize:fontSize.medium,color:colors.textLight,marginTop:spacing.md,marginBottom:spacing.sm}, ["ì¢‹ì•„í•˜ëŠ” ì˜í™” ì¥ë¥´ (1ê°œ ì´ìƒ ì„ íƒ) *"]),
                    createElement('div', {}, {display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:spacing.sm,marginBottom:spacing.lg}, 
                        movieGenres.map(genre => 
                            createElement('label', {}, {display:"flex",alignItems:"center",color:colors.white,cursor:"pointer",backgroundColor:colors.darkGray,padding:spacing.sm,borderRadius:borderRadius.small}, [
                                createElement('input', { type: "checkbox", checked: liked.includes(genre), onchange: () => toggleGenre(genre, 'like') }, cb),
                                createElement('span', {}, {}, [genre])
                            ])
                        )
                    ),

                    createElement('label', {}, {display:"block",fontSize:fontSize.medium,color:colors.textLight,marginTop:spacing.md,marginBottom:spacing.sm}, ["ì‹«ì–´í•˜ëŠ” ì˜í™” ì¥ë¥´ (1ê°œ ì´ìƒ ì„ íƒ) *"]),
                    createElement('div', {}, {display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:spacing.sm,marginBottom:spacing.lg}, 
                        movieGenres.map(genre => 
                            createElement('label', {}, {display:"flex",alignItems:"center",color:colors.white,cursor:"pointer",backgroundColor:colors.darkGray,padding:spacing.sm,borderRadius:borderRadius.small}, [
                                createElement('input', { type: "checkbox", checked: disliked.includes(genre), onchange: () => toggleGenre(genre, 'disliked') }, cb),
                                createElement('span', {}, {}, [genre])
                            ])
                        )
                    ),
                    
                    errorElement,
                    createElement('button', { type: "submit" }, pStyle, ["íšŒì›ê°€ì… ì™„ë£Œ"]),
                    createElement('button', { type: "button", onclick: () => setState({ registerForm: { ...state.registerForm, step: 1 } }) }, sStyle, ["ì´ì „ ë‹¨ê³„"])
                ]);
            }

            return createElement('div', {}, {}, [
                createElement('h2', {}, {textAlign:"center",color:colors.white,marginBottom:spacing.xl,fontSize:fontSize.title}, ["íšŒì›ê°€ì…"]),
                content
            ]);
        }

        function renderMainPage() {
            const { username } = state;
            const attemptLogout = () => setState({ confirmModal: { isVisible: true, message: "ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?", action: "logout" } });

            return createElement('div', {}, {textAlign:"center",color:colors.white,paddingTop:spacing.xxl}, [
                createElement('div', {}, {backgroundColor:colors.darkGray,padding:spacing.xxl,borderRadius:borderRadius.medium,marginBottom:spacing.xl}, [
                    createElement('p', {}, {fontSize:fontSize.xlarge,margin:0,fontWeight:fontWeight.bold}, [`ğŸ‰ğŸ¬Moviehubì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!ğŸ‰`])
                ]),
                createElement('button', { onclick: attemptLogout }, getButtonStyle(colors.primary, colors.white), ["ë¡œê·¸ì•„ì›ƒ"])
            ]);
        }

        function renderLogoutSuccessPage() {
            return createElement('div', {}, {textAlign:"center",color:colors.white,paddingTop:spacing.xxl}, [
                createElement('div', {}, {backgroundColor:colors.success,padding:spacing.xxl,borderRadius:borderRadius.medium,marginBottom:spacing.xl}, [
                    createElement('p', {}, {fontSize:fontSize.xlarge,margin:0,fontWeight:fontWeight.bold,color:colors.white}, ["ë¡œê·¸ì•„ì›ƒì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤!"])
                ]),
                createElement('button', { onclick: () => setState({ page: "login" }) }, getButtonStyle(colors.primary, colors.white), ["ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™"])
            ]);
        }


    
        //  ë©”ì¸ ì•± ë¡œì§
      

        const handleLoginSuccess = (id) => {
            setState({ username: id, isLoggedIn: true, page: "main" });
            openModal("success", `ê¹€ìƒˆì‹¹ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!`);
        };

        const handleRegisterSuccess = (id) => {
            // íšŒì›ê°€ì… ì„±ê³µ ì‹œ í¼ì„ ì´ˆê¸°í™”í•˜ê³  ëª¨ë‹¬ì„ ë„ìš´ í›„, ëª¨ë‹¬ì´ ë‹«íˆë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
            setState({ 
                page: "register", 
                registerForm: { 
                    step: 1, 
                    terms: { term1: false, term2: false, term3: false },
                    formData: { password: "", confirm: "", name: "", email: "", phone: "", liked: [], disliked: [] },
                    formError: ""
                }
            });
            openModal("success", `í™˜ì˜í•©ë‹ˆë‹¤, ê¹€ìƒˆì‹¹ë‹˜! íšŒì›ê°€ì…ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤!\ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
        };

        const confirmLogout = () => {
            setState({ 
                confirmModal: { isVisible: false, message: "", action: "" }, 
                isLoggedIn: false, 
                username: "", 
                page: "logoutSuccess" 
            });
        };
        
    function renderAuthPage() {
            const { page } = state;
           
            const containerStyle = { minHeight:"100vh", backgroundColor: "rgba(0,0,0,0.7)", color:colors.white, display:"flex", justifyContent:"center", alignItems:"center", padding:spacing.xl, paddingTop:`calc(${spacing.xl}+60px)` };
            const boxStyle = { width:"100%", maxWidth:"450px", padding:spacing.xl, backgroundColor:colors.darkGray, borderRadius:borderRadius.medium, boxShadow:"0 8px 16px rgba(0,0,0,0.2)" };

            let contentElement;
            if (page === "login") contentElement = renderLoginForm();
            else if (page === "register") contentElement = renderRegisterForm();
            else if (page === "main") contentElement = renderMainPage();
            else if (page === "logoutSuccess") contentElement = renderLogoutSuccessPage();
            else contentElement = createElement('div', {}, {}, ['í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.']);

            const box = createElement('div', {}, boxStyle, [contentElement]);
            const mainContainer = createElement('div', {}, containerStyle, [box]);

            const header = renderHeader();
            const modal = renderModal();
            const confirmModal = renderConfirmModal();

            const fragment = document.createDocumentFragment();
            fragment.appendChild(header);
            fragment.appendChild(mainContainer);
            if (modal) fragment.appendChild(modal);
            if (confirmModal) fragment.appendChild(confirmModal);

            return fragment;
        }
        // ì•± ë Œë”ë§ í•¨ìˆ˜
        function renderApp() {
            rootElement.innerHTML = '';
            rootElement.appendChild(renderAuthPage());
        }

        // ì´ˆê¸° ì‹¤í–‰: í˜ì´ì§€ ë¡œë“œ í›„ ë Œë”ë§ ì‹œì‘
        document.addEventListener('DOMContentLoaded', renderApp);
    </script>
</body>
</html>